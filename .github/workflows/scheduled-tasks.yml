name: Automated Content Generation

on:
  schedule:
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ 4 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å (UTC –≤—Ä–µ–º—è)
    # –ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è = UTC + 3 —á–∞—Å–∞
    - cron: '0 5 * * *'   # 8:00 –ú–°–ö
    - cron: '0 9 * * *'   # 12:00 –ú–°–ö
    - cron: '0 13 * * *'  # 16:00 –ú–°–ö
    - cron: '0 17 * * *'  # 20:00 –ú–°–ö
    
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

jobs:
  generate-post:
    name: Generate and Publish Post
    runs-on: ubuntu-latest
    
    steps:
      - name: Call API to generate post
        run: |
          echo "üöÄ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–∞..."
          
          HTTP_CODE=$(curl -s -o /tmp/response.json -w "%{http_code}" \
            -X POST https://zen-automation-production.up.railway.app/api/v1/generate)
          
          echo "üìä HTTP Status: $HTTP_CODE"
          
          if [ -f /tmp/response.json ]; then
            cat /tmp/response.json
          fi
          
          if [ "$HTTP_CODE" = "200" ]; then
            echo "‚úÖ –ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!"
          else
            echo "‚ùå –û—à–∏–±–∫–∞: HTTP $HTTP_CODE"
            exit 1
          fi
