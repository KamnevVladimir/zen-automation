name: Scheduled Posts and Promotion

on:
  schedule:
    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å—Ç–æ–≤ 4 —Ä–∞–∑–∞ –≤ –¥–µ–Ω—å (UTC –≤—Ä–µ–º—è)
    # –ú–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è = UTC + 3 —á–∞—Å–∞
    - cron: '0 5 * * *'   # 8:00 –ø–æ –ú–æ—Å–∫–≤–µ - Weekend destinations
    - cron: '0 9 * * *'   # 12:00 –ø–æ –ú–æ—Å–∫–≤–µ - Budget destinations
    - cron: '0 13 * * *'  # 16:00 –ø–æ –ú–æ—Å–∫–≤–µ - Travel lifehacks
    - cron: '0 17 * * *'  # 20:00 –ø–æ –ú–æ—Å–∫–≤–µ - Trending destinations
    
  workflow_dispatch: # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ GitHub Actions UI

jobs:
  generate-post:
    name: Generate and Publish Post
    runs-on: ubuntu-latest
    
    steps:
      - name: Generate post
        run: |
          echo "üöÄ –ó–∞–ø—É—Å–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞..."
          
          RESPONSE=$(curl -s -X POST \
            -w "\n%{http_code}" \
            https://zen-automation-production.up.railway.app/api/v1/generate)
          
          HTTP_CODE=$(echo "$RESPONSE" | tail -n1)
          BODY=$(echo "$RESPONSE" | head -n-1)
          
          echo "üìä HTTP Status: $HTTP_CODE"
          echo "üìù Response: $BODY"
          
          if [ "$HTTP_CODE" = "200" ]; then
            echo "‚úÖ –ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!"
          else
            echo "‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å—Ç–∞!"
            exit 1
          fi
      
      - name: Wait before next action
        run: sleep 10

  # –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π, –∫–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–º–æ-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  # promote:
  #   name: Run Promotion Activity
  #   runs-on: ubuntu-latest
  #   
  #   steps:
  #     - name: Run promotion
  #       run: |
  #         echo "üéØ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–º–æ-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏..."
  #         
  #         RESPONSE=$(curl -s -X POST \
  #           -w "\n%{http_code}" \
  #           https://zen-automation-production.up.railway.app/api/v1/promote)
  #         
  #         HTTP_CODE=$(echo "$RESPONSE" | tail -n1)
  #         BODY=$(echo "$RESPONSE" | head -n-1)
  #         
  #         echo "üìä HTTP Status: $HTTP_CODE"
  #         echo "üìù Response: $BODY"
  #         
  #         if [ "$HTTP_CODE" = "200" ]; then
  #           echo "‚úÖ –ü—Ä–æ–º–æ-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
  #         else
  #           echo "‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–º–æ-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é"
  #         fi
